{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Buy Contract (request)",
    "description": "Buy a Contract",
    "type": "object",
    "additionalProperties": false,
    "required": [
        "buy",
        "price"
    ],
    "properties": {
        "buy": {
            "description": "Either the ID received from a Price Proposal (proposal) call, or '1' if contract buy parameters are passed in the parameters field.",
            "type": "string",
            "pattern": "^(?:[\\w-]{32,128}|1)$"
        },
        "parameters": {
            "description": "Optional field, used to pass the parameters for contract buy",
            "type": "object",
            "additionalProperties": false,
            "required": [
                "contract_type",
                "currency",
                "symbol"
            ],
            "properties": {
                "amount": {
                    "description": "Proposed payout or stake value",
                    "type": "number",
                    "minimum": 0
                },
                "app_markup_percentage": {
                    "description": "Markup added to contract prices (as a percentage of contract payout)",
                    "type": "number"
                },
                "barrier": {
                    "description": "Barrier for the contract (or last digit prediction for digit contracts). Contracts less than 24 hours in duration would need a relative barrier (barriers which need +/-), where entry spot would be adjusted accordingly with that amount to define a barrier, except for Volatility Indices as they support both relative and absolute barriers.",
                    "type": "string",
                    "pattern": "^(?=.{1,20}$)[+-]?[0-9]+\\.?[0-9]*$"
                },
                "barrier2": {
                    "description": "Low barrier for the contract (for contracts with two barriers). Contracts less than 24 hours in duration would need a relative barrier (barriers which need +/-), where entry spot would be adjusted accordingly with that amount to define a barrier, except for Volatility Indices as they support both relative and absolute barriers.",
                    "type": "string",
                    "pattern": "^(?=.{1,20}$)[+-]?[0-9]+\\.?[0-9]*$"
                },
                "basis": {
                    "description": "Indicates whether amount is 'payout' or 'stake' for binary options.",
                    "type": "string",
                    "enum": [
                        "payout",
                        "stake"
                    ]
                },
                "contract_type": {
                    "description": "A valid contract-type",
                    "type": "string",
                    "pattern": "^\\w{2,30}$"
                },
                "currency": {
                    "description": "This can only be the account-holder's currency",
                    "type": "string",
                    "pattern": "^[A-Z]{3}$"
                },
                "date_expiry": {
                    "description": "Epoch value of the expiry time of the contract. You must either specify date_expiry or duration.",
                    "type": "integer",
                    "maximum": 9999999999,
                    "minimum": 1
                },
                "date_start": {
                    "description": "For forward-starting contracts, epoch value of the starting time of the contract.",
                    "type": "integer",
                    "maximum": 9999999999,
                    "minimum": 0
                },
                "duration": {
                    "description": "Duration quantity",
                    "type": "integer",
                    "minimum": 0
                },
                "duration_unit": {
                    "description": "Duration unit is s(seconds), m(minutes), h(hours), d(days), t(ticks)",
                    "type": "string",
                    "enum": [
                        "d",
                        "m",
                        "s",
                        "h",
                        "t"
                    ]
                },
                "limit_order": {
                    "description": "Add an order to close the contract once the order condition is met (currently only for MULTUP and MULTDOWN)",
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "stop_loss": {
                            "description": "Contract will be automatically closed when the value of the contract reaches a specific loss.",
                            "type": "number"
                        },
                        "take_profit": {
                            "description": "Contract will be automatically closed when the value of the contract reaches a specific profit.",
                            "type": "number"
                        }
                    }
                },
                "multiplier": {
                    "description": "The multiplier for non-binary options. E.g. lookbacks.",
                    "type": "number",
                    "minimum": 0
                },
                "product_type": {
                    "description": "The product type, either basic or multi_barrier",
                    "type": "string",
                    "pattern": "^(multi_barrier|basic)$",
                    "default": "basic"
                },
                "selected_tick": {
                    "description": "The tick that is predicted to have the highest/lowest value - for tickhigh and ticklow contracts.",
                    "type": "integer"
                },
                "symbol": {
                    "description": "Symbol code",
                    "type": "string",
                    "pattern": "^\\w{2,30}$"
                },
                "trading_period_start": {
                    "description": "An epoch value of a predefined trading period start time",
                    "type": "integer",
                    "maximum": 9999999999,
                    "minimum": 1
                }
            }
        },
        "price": {
            "description": "Maximum price at which to purchase the contract.",
            "type": "number",
            "minimum": 0
        },
        "subscribe": {
            "description": "1 - to stream",
            "type": "integer",
            "enum": [
                1
            ]
        },
        "passthrough": {
            "description": "[Optional] Used to pass data through the websocket, which may be retrieved via the echo_req output field.",
            "type": "object"
        },
        "req_id": {
            "description": "[Optional] Used to map request to response.",
            "type": "integer"
        }
    }
}
