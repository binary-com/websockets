var traverse;(function(){function e(e){this.value=e}function t(e,t,o){var r=[],u=[],i=!0;return function e(c){function a(){if("object"==typeof d.node&&null!==d.node){d.keys&&d.node_===d.node||(d.keys=l(d.node)),d.isLeaf=0==d.keys.length;for(var e=0;e<u.length;e++)if(u[e].node_===c){d.circular=u[e];break}}else d.isLeaf=!0,d.keys=null;d.notLeaf=!d.isLeaf,d.notRoot=!d.isRoot}var f=o?n(c):c,v={},y=!0,d={node:f,node_:c,path:[].concat(r),parent:u[u.length-1],parents:u,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(e,t){d.isRoot||(d.parent.node[d.key]=e),d.node=e,t&&(y=!1)},delete:function(e){delete d.parent.node[d.key],e&&(y=!1)},remove:function(e){p(d.parent.node)?d.parent.node.splice(d.key,1):delete d.parent.node[d.key],e&&(y=!1)},keys:null,before:function(e){v.before=e},after:function(e){v.after=e},pre:function(e){v.pre=e},post:function(e){v.post=e},stop:function(){i=!1},block:function(){y=!1}};if(!i)return d;a();var b=t.call(d,d.node);return void 0!==b&&d.update&&d.update(b),v.before&&v.before.call(d,d.node),y?("object"!=typeof d.node||null===d.node||d.circular||(u.push(d),a(),s(d.keys,function(t,n){r.push(t),v.pre&&v.pre.call(d,d.node[t],t);var u=e(d.node[t]);o&&h.call(d.node,t)&&(d.node[t]=u.node),u.isLast=n==d.keys.length-1,u.isFirst=0==n,v.post&&v.post.call(d,u),r.pop()}),u.pop()),v.after&&v.after.call(d,d.node),d):d}(e).node}function n(e){if("object"==typeof e&&null!==e){var t;if(p(e))t=[];else if(r(e))t=new Date(e.getTime?e.getTime():e);else if(u(e))t=new RegExp(e);else if(i(e))t={message:e.message};else if(c(e))t=new Boolean(e);else if(a(e))t=new Number(e);else if(f(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},o=function(){};o.prototype=n,t=new o}return s(l(e),function(n){t[n]=e[n]}),t}return e}function o(e){return Object.prototype.toString.call(e)}function r(e){return"[object Date]"===o(e)}function u(e){return"[object RegExp]"===o(e)}function i(e){return"[object Error]"===o(e)}function c(e){return"[object Boolean]"===o(e)}function a(e){return"[object Number]"===o(e)}function f(e){return"[object String]"===o(e)}traverse=function(t){return new e(t)},e.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var o=e[n];if(!t||!h.call(t,o)){t=void 0;break}t=t[o]}return t},e.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var o=e[n];if(!t||!h.call(t,o))return!1;t=t[o]}return!0},e.prototype.set=function(e,t){for(var n=this.value,o=0;o<e.length-1;o++){var r=e[o];h.call(n,r)||(n[r]={}),n=n[r]}return n[e[o]]=t,t},e.prototype.map=function(e){return t(this.value,e,!0)},e.prototype.forEach=function(e){return this.value=t(this.value,e,!1),this.value},e.prototype.reduce=function(e,t){var n=1===arguments.length,o=n?this.value:t;return this.forEach(function(t){this.isRoot&&n||(o=e.call(this,o,t))}),o},e.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},e.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},e.prototype.clone=function(){var e=[],t=[];return function o(r){for(var u=0;u<e.length;u++)if(e[u]===r)return t[u];if("object"==typeof r&&null!==r){var i=n(r);return e.push(r),t.push(i),s(l(r),function(e){i[e]=o(r[e])}),e.pop(),t.pop(),i}return r}(this.value)};var l=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};s(l(e.prototype),function(t){traverse[t]=function(n){var o=[].slice.call(arguments,1),r=new e(n);return r[t].apply(r,o)}});var h=Object.hasOwnProperty||function(e,t){return t in e}})();